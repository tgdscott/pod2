{% extends 'base.html' %}
{% block title %}New Podcast | PodcastPro{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-1">
                <li class="breadcrumb-item"><a href="/admin">Admin</a></li>
                <li class="breadcrumb-item"><a href="/admin/podcasts">Podcasts</a></li>
                <li class="breadcrumb-item active">New Podcast</li>
            </ol>
        </nav>
        <h2 class="mb-1">Create New Podcast</h2>
        <p class="text-muted mb-0">Set up a new podcast channel</p>
    </div>
    <a href="/admin/podcasts" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i>Back to Podcasts
    </a>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-body">
                <form id="podcastForm">
                    <!-- Basic Information -->
                    <div class="mb-4">
                        <h5>Basic Information</h5>
                        <div class="row g-3">
                            <div class="col-12">
                                <label for="name" class="form-label">Podcast Name *</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                                <div class="form-text">The name of your podcast channel</div>
                            </div>
                            <div class="col-12">
                                <label for="description" class="form-label">Description</label>
                                <textarea class="form-control" id="description" name="description" rows="3" placeholder="Brief description of your podcast..."></textarea>
                                <div class="form-text">A short description of what your podcast is about</div>
                            </div>
                            <div class="col-md-6">
                                <label for="category" class="form-label">Category</label>
                                <select class="form-select" id="category" name="category">
                                    <option value="">Select a category...</option>
                                    <option value="technology">Technology</option>
                                    <option value="business">Business</option>
                                    <option value="education">Education</option>
                                    <option value="entertainment">Entertainment</option>
                                    <option value="news">News</option>
                                    <option value="sports">Sports</option>
                                    <option value="health">Health & Fitness</option>
                                    <option value="lifestyle">Lifestyle</option>
                                    <option value="comedy">Comedy</option>
                                    <option value="music">Music</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="language" class="form-label">Language</label>
                                <select class="form-select" id="language" name="language">
                                    <option value="en">English</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                    <option value="de">German</option>
                                    <option value="it">Italian</option>
                                    <option value="pt">Portuguese</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="mb-4">
                        <h5>Contact Information</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="author" class="form-label">Author/Host</label>
                                <input type="text" class="form-control" id="author" name="author" placeholder="Your name or organization">
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Contact Email</label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="contact@example.com">
                            </div>
                            <div class="col-12">
                                <label for="website" class="form-label">Website</label>
                                <input type="url" class="form-control" id="website" name="website" placeholder="https://yourwebsite.com">
                            </div>
                        </div>
                    </div>

                    <!-- Podcast Settings -->
                    <div class="mb-4">
                        <h5>Podcast Settings</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="explicit" name="explicit">
                                    <label class="form-check-label" for="explicit">
                                        Contains explicit content
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="active" name="active" checked>
                                    <label class="form-check-label" for="active">
                                        Active podcast
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="fas fa-save me-2"></i>Create Podcast
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-lg" onclick="window.location.href='/admin/podcasts'">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <!-- Help Card -->
        <div class="card mb-4">
            <div class="card-header">
                <h6 class="mb-0"><i class="fas fa-info-circle me-2"></i>Tips</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0">
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Choose a clear, memorable name</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Write a compelling description</li>
                    <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Select the right category</li>
                    <li><i class="fas fa-check text-success me-2"></i>You can edit these details later</li>
                </ul>
            </div>
        </div>

        <!-- Next Steps -->
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0"><i class="fas fa-arrow-right me-2"></i>Next Steps</h6>
            </div>
            <div class="card-body">
                <ol class="mb-0">
                    <li class="mb-2">Create your podcast</li>
                    <li class="mb-2">Upload audio files (intros, outros, music)</li>
                    <li class="mb-2">Set up episode templates</li>
                    <li>Start creating episodes!</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('podcastForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    var formData = {
        title: document.getElementById('name').value,
        description: document.getElementById('description').value,
        category: document.getElementById('category').value,
        language: document.getElementById('language').value,
        author: document.getElementById('author').value,
        email: document.getElementById('email').value,
        website: document.getElementById('website').value,
        explicit: document.getElementById('explicit').checked,
        active: document.getElementById('active').checked
    };
    
    if (!formData.title) {
        alert('Please enter a podcast name');
        return;
    }
    
    fetch('/api/v1/podcasts', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer {{ session.get("token", "") }}'
        },
        body: JSON.stringify(formData)
    })
    .then(function(response) {
        if (!response.ok) {
            throw new Error('Failed to create podcast');
        }
        return response.json();
    })
    .then(function(data) {
        alert('Podcast created successfully!');
        window.location.href = '/admin/podcasts/' + data.podcast.id;
    })
    .catch(function(error) {
        console.error('Error:', error);
        alert('Failed to create podcast: ' + error.message);
    });
});
</script>
{% endblock %} 